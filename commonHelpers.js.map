{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\n\nconst formEl = document.querySelector('form');\nconst galleryEl = document.querySelector('.js-gallery-elem');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\n\nlet q = '';\nlet currentPage = 1;\nlet totalPages = 0;\nlet scrollHeiht = 0;\n\n\n\n// hideLoader();\n// hideLoaderBtn();\n \nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n    });\n\nformEl.addEventListener('submit', onSubmit);\n\nasync function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n    hideLoaderBtn();\n    q = formEl.elements.query.value.trim();\n    currentPage = 1;\n    galleryEl.innerHTML = \"\";\n\n    const data = await getPhotoBySearch();\n    totalPages = Math.ceil(data.totalHits / data.hits.length);\n    checkPages();\n    // console.log(totalPages);\n    renderImages(data.hits);\n    // \n       \n    hideLoader();\n    // showLoaderBtn();\n    formEl.reset();\n           \n    \n};\n\n  \n\nasync function getPhotoBySearch() {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '42153847-0f7baac2d7b2e92d7ce6bbe8e';\n    \n   \n    const options = {\n        params: {\n    key: KEY,\n    q: `${q}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n    \n  },\n    };\n    \n    try {\n    const res = await axios.get(BASE_URL, options);\n                     \n        \n        if (res.data.total === 0) {\n           \n            renderError();\n            return hideLoaderBtn();\n                        \n        }\n        console.log(res.data);\n            return res.data;\n   \n    } catch (error) {\n        console.log('Результатів не знайдено.');\n    };\n\n     \n};\n\nloadMoreBtn.addEventListener('click', onloadMore);\n\nasync function onloadMore() {\n    hideLoaderBtn();\n    showLoader();\n    currentPage += 1;\n    const data = await getPhotoBySearch();\n    renderImages(data.hits);\n    hideLoader();\n    checkPages();\n    window.scrollBy({\n    top: getScrollHeight(),\n    behavior: 'smooth',\n  });\n    \n   \n};\n\n\nfunction renderImages(array) {\n    const markup = array.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => { return` <div class=\"gallery\">\n    <a href=\"${largeImageURL}\"><div class=\"thumb\"><img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width = \"360px\"\n      height = \"300px\"/>\n       <ul class=\"info-cards-container\">\n      <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n      <li class=\"info-cards-elements\">views<span>${views}</span></li>\n       <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n       <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n     </ul>\n     </div>\n      </a>\n    </div>`}).join('');   \n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    \n    \n    \n    lightbox.refresh();\n      \n};\n\n\nfunction renderError() {\n    galleryEl.innerHTML = \"\";\n    // totalPages = 0;\n    hideLoaderBtn();\n    hideLoader();\n    formEl.reset();\n    iziToast.show({\n        message: `❌ \"Sorry, there are no images matching your search query. Please try again!`,\n        color: 'red',\n        position: 'topRight',\n        maxWidth: '400px',\n        timeout: '3000',\n    });\n   \n    \n    \n};\n\nfunction renderEndOfCollection() {\n    // hideLoaderBtn();\n    iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        color: 'blue',\n        position: 'topRight',\n        maxWidth: '400px',\n    });\n     \n    \n    \n};\nfunction checkPages() {\n    const isLastPage = currentPage === totalPages;\n    console.log(isLastPage);\n    console.log(currentPage);\n        console.log(totalPages);\n\n    if (isLastPage) {\n        renderEndOfCollection();\n             \n    } else showLoaderBtn();\n    };\n    \n\nfunction showLoaderBtn() {\n    loadMoreBtn.classList.remove('is-hidden');\n};\n\nfunction hideLoaderBtn() {\n    loadMoreBtn.classList.add('is-hidden');\n};\n\n\nfunction showLoader() {\n  loaderEl.classList.remove('is-hidden');\n\n}\n\nfunction hideLoader() {\n  loaderEl.classList.add('is-hidden');;\n}\n\n\n\nfunction getScrollHeight() { \nconst thumbEl = document.querySelector('.thumb');\n    let rect = thumbEl.getBoundingClientRect();\n    scrollHeiht = rect.height * 2;\n    return scrollHeiht;\n};"],"names":["formEl","galleryEl","loaderEl","loadMoreBtn","q","currentPage","totalPages","scrollHeiht","lightbox","SimpleLightbox","onSubmit","e","showLoader","hideLoaderBtn","data","getPhotoBySearch","checkPages","renderImages","hideLoader","BASE_URL","options","res","axios","renderError","onloadMore","getScrollHeight","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","iziToast","renderEndOfCollection","isLastPage","showLoaderBtn"],"mappings":"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"}